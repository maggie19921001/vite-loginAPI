import{r as u,c as s,w as p,v as _,a as e,t as d,b as w,d as x,e as D,o as n,f,g as h}from"./index-CqPm2fv2.js";const L={class:"container"},T=e("h3",null,"登入",-1),V=e("h5",null,"如無帳號請先註冊",-1),b=e("p",null,"帳號",-1),C=e("p",null,"密碼",-1),U={key:0},B=e("p",null,"點選驗證以繼續",-1),E=[B],N={key:1},$=e("h3",null,"驗證資訊",-1),A={key:2},I=e("p",null,"驗證成功",-1),R={key:3},S={key:0},z={key:1},F=e("p",null,"Token",-1),M=[F],k="https://todolist-api.hexschool.io",j={__name:"LogIn",setup(O){const l=u({email:"",password:""}),a=u(""),v=u(""),m=async()=>{try{const o=await h.post(`${k}/users/sign_in`,l.value);alert("登入成功"),a.value=o.data.token}catch(o){v.value=o.message}},c=u({nickname:"",uid:""}),r=u(""),y=async()=>{const o=new Date;o.setDate(o.getDate()+1),document.cookie=`loginToken=${a.value}; expires=${o.toUTCString()}`;try{const t=await h.get(`${k}/users/checkout`,{headers:{Authorization:a.value}});c.value=t.data}catch(t){r.value=t.message}};return(o,t)=>{const g=D("RouterLink");return n(),s("div",L,[T,V,b,p(e("input",{type:"email",placeholder:"Email","onUpdate:modelValue":t[0]||(t[0]=i=>l.value.email=i)},null,512),[[_,l.value.email]]),C,p(e("input",{type:"password",placeholder:"Password","onUpdate:modelValue":t[1]||(t[1]=i=>l.value.password=i)},null,512),[[_,l.value.password]]),e("button",{type:"button",onClick:m},"確定"),a.value?(n(),s("div",U,E)):(n(),s("div",N,[e("p",null,d(v.value),1)])),$,c.value.uid?(n(),s("div",A,[I,e("p",null,"UID:"+d(c.value.uid),1),e("p",null,"Nickname:"+d(c.value.nickname),1),w(g,{to:"/todolist"},{default:x(()=>[f("我的代辦清單")]),_:1})])):(n(),s("div",R,[r.value?(n(),s("div",S,[e("p",null,d(r.value),1)])):(n(),s("div",z,M))])),p(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=i=>a.value=i)},null,512),[[_,a.value]]),e("button",{type:"button",onClick:y},"驗證")])}}};export{j as default};
